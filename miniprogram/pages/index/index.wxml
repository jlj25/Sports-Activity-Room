<!--index.wxml-->

<!-- 在顶部添加搜索框 -->
<view class="search-bar">
  <input class="search-input" type="text" placeholder="搜索活动场馆" bindinput="onSearchInput" />
  <button class="search-btn" bindtap="onSearch">搜索</button>
</view>

<!-- 顶部分类标签 -->
<scroll-view class="category-tabs" scroll-x>
  <view class="tab {{activeCategory == index ? 'active' : ''}}" wx:for="{{categories}}" wx:key="index" data-idx="{{index}}" bindtap="onCategoryTap">{{item}}</view>
</scroll-view>

<!-- 修改筛选栏 -->
<view class="filter-bar">
  <view class="filter-item" bindtap="openPriceFilter">价格筛选 ▼</view>
  <view class="filter-item" bindtap="openRatingFilter">评分筛选 ▼</view>
</view>

<!-- 瀑布流布局的活动列表 -->
<view class="masonry-container">
  <view class="masonry-column">
    <block wx:for="{{leftColumnVenues}}" wx:key="id">
      <view class="venue-card" bindtap="navigateToDetail" data-id="{{item.id}}">
        <image src="../../images/{{item.cover}}" class="venue-img" mode="aspectFill" />
        <view class="venue-badge">{{item.category}}</view>
        <view class="venue-info">
          <text class="venue-title">{{item.name}}</text>
          <view class="venue-rating">
            <text class="star">★★★★★</text>
            <text class="score">{{item.rating}}</text>
          </view>
          <text class="venue-location">{{item.location}}</text>
          <view class="venue-tags">
            <text wx:for="{{item.sports}}" wx:key="index" class="tag">{{item}}</text>
          </view>
          <view class="venue-price">
            <text class="price">￥{{item.price}}</text>
            <text class="unit">/小时起</text>
          </view>
          <view class="button-group">
            <button class="reserve-btn" bindtap="onReserve" data-id="{{item.id}}">立即预约</button>
            <button class="favorite-btn" bindtap="toggleFavorite" data-id="{{item.id}}">
              {{isFavorite(item.id) ? '已收藏' : '收藏'}}
            </button>
          </view>
        </view>
      </view>
    </block>
  </view>
  
  <view class="masonry-column">
    <block wx:for="{{rightColumnVenues}}" wx:key="id">
      <view class="venue-card" bindtap="navigateToDetail" data-id="{{item.id}}">
        <image src="../../images/{{item.cover}}" class="venue-img" mode="aspectFill" />
        <view class="venue-badge">{{item.category}}</view>
        <view class="venue-info">
          <text class="venue-title">{{item.name}}</text>
          <view class="venue-rating">
            <text class="star">★★★★★</text>
            <text class="score">{{item.rating}}</text>
          </view>
          <text class="venue-location">{{item.location}}</text>
          <view class="venue-tags">
            <text wx:for="{{item.sports}}" wx:key="index" class="tag">{{item}}</text>
          </view>
          <view class="venue-price">
            <text class="price">￥{{item.price}}</text>
            <text class="unit">/小时起</text>
          </view>
          <view class="button-group">
            <button class="reserve-btn" bindtap="onReserve" data-id="{{item.id}}">立即预约</button>
            <button class="favorite-btn" bindtap="toggleFavorite" data-id="{{item.id}}">
              {{isFavorite(item.id) ? '已收藏' : '收藏'}}
            </button>
          </view>
        </view>
      </view>
    </block>
  </view>
</view>
